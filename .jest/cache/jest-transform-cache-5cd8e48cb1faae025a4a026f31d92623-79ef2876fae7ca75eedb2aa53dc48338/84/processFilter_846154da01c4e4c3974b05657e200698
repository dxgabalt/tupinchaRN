939592693e437560259e87f0a1e71cf5
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = processFilter;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _processColor = _interopRequireDefault(require("./processColor"));
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function processFilter(filter) {
  var result = [];
  if (filter == null) {
    return result;
  }
  if (typeof filter === 'string') {
    filter = filter.replace(/\n/g, ' ');
    var regex = /([\w-]+)\(([^()]*|\([^()]*\)|[^()]*\([^()]*\)[^()]*)\)/g;
    var matches;
    while (matches = regex.exec(filter)) {
      var filterName = matches[1].toLowerCase();
      if (filterName === 'drop-shadow') {
        var dropShadow = parseDropShadow(matches[2]);
        if (dropShadow != null) {
          result.push({
            dropShadow: dropShadow
          });
        } else {
          return [];
        }
      } else {
        var camelizedName = filterName === 'drop-shadow' ? 'dropShadow' : filterName === 'hue-rotate' ? 'hueRotate' : filterName;
        var amount = _getFilterAmount(camelizedName, matches[2]);
        if (amount != null) {
          var filterFunction = {};
          filterFunction[camelizedName] = amount;
          result.push(filterFunction);
        } else {
          return [];
        }
      }
    }
  } else if (Array.isArray(filter)) {
    var _iterator = _createForOfIteratorHelper(filter),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _filterFunction = _step.value;
        var _Object$entries$ = (0, _slicedToArray2["default"])(Object.entries(_filterFunction)[0], 2),
          _filterName = _Object$entries$[0],
          filterValue = _Object$entries$[1];
        if (_filterName === 'dropShadow') {
          var _dropShadow = parseDropShadow(filterValue);
          if (_dropShadow == null) {
            return [];
          }
          result.push({
            dropShadow: _dropShadow
          });
        } else {
          var _amount = _getFilterAmount(_filterName, filterValue);
          if (_amount != null) {
            var resultObject = {};
            resultObject[_filterName] = _amount;
            result.push(resultObject);
          } else {
            return [];
          }
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  } else {
    throw new TypeError("".concat((0, _typeof2["default"])(filter), " filter is not a string or array"));
  }
  return result;
}
function _getFilterAmount(filterName, filterArgs) {
  var filterArgAsNumber;
  var unit;
  if (typeof filterArgs === 'string') {
    var argsWithUnitsRegex = new RegExp(/([+-]?\d*(\.\d+)?)([a-zA-Z%]+)?/g);
    var match = argsWithUnitsRegex.exec(filterArgs);
    if (!match || isNaN(Number(match[1]))) {
      return undefined;
    }
    filterArgAsNumber = Number(match[1]);
    unit = match[3];
  } else if (typeof filterArgs === 'number') {
    filterArgAsNumber = filterArgs;
  } else {
    return undefined;
  }
  switch (filterName) {
    case 'hueRotate':
      if (filterArgAsNumber === 0) {
        return 0;
      }
      if (unit !== 'deg' && unit !== 'rad') {
        return undefined;
      }
      return unit === 'rad' ? 180 * filterArgAsNumber / Math.PI : filterArgAsNumber;
    case 'blur':
      if (unit && unit !== 'px' || filterArgAsNumber < 0) {
        return undefined;
      }
      return filterArgAsNumber;
    case 'brightness':
    case 'contrast':
    case 'grayscale':
    case 'invert':
    case 'opacity':
    case 'saturate':
    case 'sepia':
      if (unit && unit !== '%' && unit !== 'px' || filterArgAsNumber < 0) {
        return undefined;
      }
      if (unit === '%') {
        filterArgAsNumber /= 100;
      }
      return filterArgAsNumber;
    default:
      return undefined;
  }
}
function parseDropShadow(rawDropShadow) {
  var dropShadow = typeof rawDropShadow === 'string' ? parseDropShadowString(rawDropShadow) : rawDropShadow;
  var parsedDropShadow = {
    offsetX: 0,
    offsetY: 0
  };
  var offsetX;
  var offsetY;
  for (var arg in dropShadow) {
    var value = void 0;
    switch (arg) {
      case 'offsetX':
        value = typeof dropShadow.offsetX === 'string' ? parseLength(dropShadow.offsetX) : dropShadow.offsetX;
        if (value == null) {
          return null;
        }
        offsetX = value;
        break;
      case 'offsetY':
        value = typeof dropShadow.offsetY === 'string' ? parseLength(dropShadow.offsetY) : dropShadow.offsetY;
        if (value == null) {
          return null;
        }
        offsetY = value;
        break;
      case 'standardDeviation':
        value = typeof dropShadow.standardDeviation === 'string' ? parseLength(dropShadow.standardDeviation) : dropShadow.standardDeviation;
        if (value == null || value < 0) {
          return null;
        }
        parsedDropShadow.standardDeviation = value;
        break;
      case 'color':
        var color = (0, _processColor["default"])(dropShadow.color);
        if (color == null) {
          return null;
        }
        parsedDropShadow.color = color;
        break;
      default:
        return null;
    }
  }
  if (offsetX == null || offsetY == null) {
    return null;
  }
  parsedDropShadow.offsetX = offsetX;
  parsedDropShadow.offsetY = offsetY;
  return parsedDropShadow;
}
function parseDropShadowString(rawDropShadow) {
  var dropShadow = {
    offsetX: 0,
    offsetY: 0
  };
  var offsetX;
  var offsetY;
  var lengthCount = 0;
  var keywordDetectedAfterLength = false;
  var _iterator2 = _createForOfIteratorHelper(rawDropShadow.split(/\s+(?![^(]*\))/)),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var arg = _step2.value;
      var processedColor = (0, _processColor["default"])(arg);
      if (processedColor != null) {
        if (dropShadow.color != null) {
          return null;
        }
        if (offsetX != null) {
          keywordDetectedAfterLength = true;
        }
        dropShadow.color = arg;
        continue;
      }
      switch (lengthCount) {
        case 0:
          offsetX = arg;
          lengthCount++;
          break;
        case 1:
          if (keywordDetectedAfterLength) {
            return null;
          }
          offsetY = arg;
          lengthCount++;
          break;
        case 2:
          if (keywordDetectedAfterLength) {
            return null;
          }
          dropShadow.standardDeviation = arg;
          lengthCount++;
          break;
        default:
          return null;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  if (offsetX == null || offsetY == null) {
    return null;
  }
  dropShadow.offsetX = offsetX;
  dropShadow.offsetY = offsetY;
  return dropShadow;
}
function parseLength(length) {
  var argsWithUnitsRegex = /([+-]?\d*(\.\d+)?)([\w\W]+)?/g;
  var match = argsWithUnitsRegex.exec(length);
  if (!match || Number.isNaN(match[1])) {
    return null;
  }
  if (match[3] != null && match[3] !== 'px') {
    return null;
  }
  return Number(match[1]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicHJvY2Vzc0ZpbHRlciIsIl90eXBlb2YyIiwiX3NsaWNlZFRvQXJyYXkyIiwiX3Byb2Nlc3NDb2xvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwiciIsImUiLCJ0IiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJsZW5ndGgiLCJfbiIsIkYiLCJzIiwibiIsImRvbmUiLCJmIiwiVHlwZUVycm9yIiwibyIsImEiLCJ1IiwiY2FsbCIsIm5leHQiLCJfYXJyYXlMaWtlVG9BcnJheSIsInRvU3RyaW5nIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImZpbHRlciIsInJlc3VsdCIsInJlcGxhY2UiLCJyZWdleCIsIm1hdGNoZXMiLCJleGVjIiwiZmlsdGVyTmFtZSIsInRvTG93ZXJDYXNlIiwiZHJvcFNoYWRvdyIsInBhcnNlRHJvcFNoYWRvdyIsInB1c2giLCJjYW1lbGl6ZWROYW1lIiwiYW1vdW50IiwiX2dldEZpbHRlckFtb3VudCIsImZpbHRlckZ1bmN0aW9uIiwiX2l0ZXJhdG9yIiwiX3N0ZXAiLCJfT2JqZWN0JGVudHJpZXMkIiwiZW50cmllcyIsImZpbHRlclZhbHVlIiwicmVzdWx0T2JqZWN0IiwiZXJyIiwiY29uY2F0IiwiZmlsdGVyQXJncyIsImZpbHRlckFyZ0FzTnVtYmVyIiwidW5pdCIsImFyZ3NXaXRoVW5pdHNSZWdleCIsIlJlZ0V4cCIsIm1hdGNoIiwiaXNOYU4iLCJOdW1iZXIiLCJ1bmRlZmluZWQiLCJNYXRoIiwiUEkiLCJyYXdEcm9wU2hhZG93IiwicGFyc2VEcm9wU2hhZG93U3RyaW5nIiwicGFyc2VkRHJvcFNoYWRvdyIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYXJnIiwicGFyc2VMZW5ndGgiLCJzdGFuZGFyZERldmlhdGlvbiIsImNvbG9yIiwicHJvY2Vzc0NvbG9yIiwibGVuZ3RoQ291bnQiLCJrZXl3b3JkRGV0ZWN0ZWRBZnRlckxlbmd0aCIsIl9pdGVyYXRvcjIiLCJzcGxpdCIsIl9zdGVwMiIsInByb2Nlc3NlZENvbG9yIl0sInNvdXJjZXMiOlsicHJvY2Vzc0ZpbHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdCBzdHJpY3QtbG9jYWxcbiAqIEBmbG93XG4gKiBAb25jYWxsIHJlYWN0LW5hdGl2ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0NvbG9yVmFsdWV9IGZyb20gJy4vU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7RHJvcFNoYWRvd1ZhbHVlLCBGaWx0ZXJGdW5jdGlvbn0gZnJvbSAnLi9TdHlsZVNoZWV0VHlwZXMnO1xuXG5pbXBvcnQgcHJvY2Vzc0NvbG9yIGZyb20gJy4vcHJvY2Vzc0NvbG9yJztcblxudHlwZSBQYXJzZWRGaWx0ZXIgPVxuICB8IHticmlnaHRuZXNzOiBudW1iZXJ9XG4gIHwge2JsdXI6IG51bWJlcn1cbiAgfCB7Y29udHJhc3Q6IG51bWJlcn1cbiAgfCB7Z3JheXNjYWxlOiBudW1iZXJ9XG4gIHwge2h1ZVJvdGF0ZTogbnVtYmVyfVxuICB8IHtpbnZlcnQ6IG51bWJlcn1cbiAgfCB7b3BhY2l0eTogbnVtYmVyfVxuICB8IHtzYXR1cmF0ZTogbnVtYmVyfVxuICB8IHtzZXBpYTogbnVtYmVyfVxuICB8IHtkcm9wU2hhZG93OiBQYXJzZWREcm9wU2hhZG93fTtcblxudHlwZSBQYXJzZWREcm9wU2hhZG93ID0ge1xuICBvZmZzZXRYOiBudW1iZXIsXG4gIG9mZnNldFk6IG51bWJlcixcbiAgc3RhbmRhcmREZXZpYXRpb24/OiBudW1iZXIsXG4gIGNvbG9yPzogQ29sb3JWYWx1ZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXIoXG4gIGZpbHRlcjogPygkUmVhZE9ubHlBcnJheTxGaWx0ZXJGdW5jdGlvbj4gfCBzdHJpbmcpLFxuKTogJFJlYWRPbmx5QXJyYXk8UGFyc2VkRmlsdGVyPiB7XG4gIGxldCByZXN1bHQ6IEFycmF5PFBhcnNlZEZpbHRlcj4gPSBbXTtcbiAgaWYgKGZpbHRlciA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZmlsdGVyID09PSAnc3RyaW5nJykge1xuICAgIGZpbHRlciA9IGZpbHRlci5yZXBsYWNlKC9cXG4vZywgJyAnKTtcblxuICAgIC8vIG1hdGNoZXMgb24gZnVuY3Rpb25zIHdpdGggYXJncyBhbmQgbmVzdGVkIGZ1bmN0aW9ucyBsaWtlIFwiZHJvcC1zaGFkb3coMTAgMTAgMTAgcmdiYSgwLCAwLCAwLCAxKSlcIlxuICAgIGNvbnN0IHJlZ2V4ID0gLyhbXFx3LV0rKVxcKChbXigpXSp8XFwoW14oKV0qXFwpfFteKCldKlxcKFteKCldKlxcKVteKCldKilcXCkvZztcbiAgICBsZXQgbWF0Y2hlcztcblxuICAgIHdoaWxlICgobWF0Y2hlcyA9IHJlZ2V4LmV4ZWMoZmlsdGVyKSkpIHtcbiAgICAgIGxldCBmaWx0ZXJOYW1lID0gbWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGZpbHRlck5hbWUgPT09ICdkcm9wLXNoYWRvdycpIHtcbiAgICAgICAgY29uc3QgZHJvcFNoYWRvdyA9IHBhcnNlRHJvcFNoYWRvdyhtYXRjaGVzWzJdKTtcbiAgICAgICAgaWYgKGRyb3BTaGFkb3cgIT0gbnVsbCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHtkcm9wU2hhZG93fSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjYW1lbGl6ZWROYW1lID1cbiAgICAgICAgICBmaWx0ZXJOYW1lID09PSAnZHJvcC1zaGFkb3cnXG4gICAgICAgICAgICA/ICdkcm9wU2hhZG93J1xuICAgICAgICAgICAgOiBmaWx0ZXJOYW1lID09PSAnaHVlLXJvdGF0ZSdcbiAgICAgICAgICAgICAgPyAnaHVlUm90YXRlJ1xuICAgICAgICAgICAgICA6IGZpbHRlck5hbWU7XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IF9nZXRGaWx0ZXJBbW91bnQoY2FtZWxpemVkTmFtZSwgbWF0Y2hlc1syXSk7XG5cbiAgICAgICAgaWYgKGFtb3VudCAhPSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyRnVuY3Rpb24gPSB7fTtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lIFRoZSBrZXkgd2lsbCBiZSB0aGUgY29ycmVjdCBvbmUgYnV0IGZsb3cgY2FuJ3Qgc2VlIHRoYXQuXG4gICAgICAgICAgZmlsdGVyRnVuY3Rpb25bY2FtZWxpemVkTmFtZV0gPSBhbW91bnQ7XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZSBUaGUga2V5IHdpbGwgYmUgdGhlIGNvcnJlY3Qgb25lIGJ1dCBmbG93IGNhbid0IHNlZSB0aGF0LlxuICAgICAgICAgIHJlc3VsdC5wdXNoKGZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBhbnkgcHJpbWl0aXZlIGlzIGludmFsaWQgdGhlbiBhcHBseSBub25lIG9mIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIGhvd1xuICAgICAgICAgIC8vIHdlYiB3b3JrcyBhbmQgbWFrZXMgaXQgY2xlYXIgdGhhdCBzb21ldGhpbmcgaXMgd3JvbmcgYmVjdWFzZSBub1xuICAgICAgICAgIC8vIGdyYXBoaWNhbCBlZmZlY3RzIGFyZSBoYXBwZW5pbmcuXG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyKSkge1xuICAgIGZvciAoY29uc3QgZmlsdGVyRnVuY3Rpb24gb2YgZmlsdGVyKSB7XG4gICAgICBjb25zdCBbZmlsdGVyTmFtZSwgZmlsdGVyVmFsdWVdID0gT2JqZWN0LmVudHJpZXMoZmlsdGVyRnVuY3Rpb24pWzBdO1xuICAgICAgaWYgKGZpbHRlck5hbWUgPT09ICdkcm9wU2hhZG93Jykge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIGNvbnN0IGRyb3BTaGFkb3cgPSBwYXJzZURyb3BTaGFkb3coZmlsdGVyVmFsdWUpO1xuICAgICAgICBpZiAoZHJvcFNoYWRvdyA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKHtkcm9wU2hhZG93fSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhbW91bnQgPSBfZ2V0RmlsdGVyQW1vdW50KGZpbHRlck5hbWUsIGZpbHRlclZhbHVlKTtcblxuICAgICAgICBpZiAoYW1vdW50ICE9IG51bGwpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHRPYmplY3QgPSB7fTtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgcmVzdWx0T2JqZWN0W2ZpbHRlck5hbWVdID0gYW1vdW50O1xuICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICByZXN1bHQucHVzaChyZXN1bHRPYmplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIGFueSBwcmltaXRpdmUgaXMgaW52YWxpZCB0aGVuIGFwcGx5IG5vbmUgb2YgdGhlIGZpbHRlcnMuIFRoaXMgaXMgaG93XG4gICAgICAgICAgLy8gd2ViIHdvcmtzIGFuZCBtYWtlcyBpdCBjbGVhciB0aGF0IHNvbWV0aGluZyBpcyB3cm9uZyBiZWN1YXNlIG5vXG4gICAgICAgICAgLy8gZ3JhcGhpY2FsIGVmZmVjdHMgYXJlIGhhcHBlbmluZy5cbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHt0eXBlb2YgZmlsdGVyfSBmaWx0ZXIgaXMgbm90IGEgc3RyaW5nIG9yIGFycmF5YCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBfZ2V0RmlsdGVyQW1vdW50KGZpbHRlck5hbWU6IHN0cmluZywgZmlsdGVyQXJnczogbWl4ZWQpOiA/bnVtYmVyIHtcbiAgbGV0IGZpbHRlckFyZ0FzTnVtYmVyOiBudW1iZXI7XG4gIGxldCB1bml0OiBzdHJpbmc7XG4gIGlmICh0eXBlb2YgZmlsdGVyQXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBtYXRjaGVzIG9uIGFyZ3Mgd2l0aCB1bml0cyBsaWtlIFwiMS41IDUlIC04MGRlZ1wiXG4gICAgY29uc3QgYXJnc1dpdGhVbml0c1JlZ2V4ID0gbmV3IFJlZ0V4cCgvKFsrLV0/XFxkKihcXC5cXGQrKT8pKFthLXpBLVolXSspPy9nKTtcbiAgICBjb25zdCBtYXRjaCA9IGFyZ3NXaXRoVW5pdHNSZWdleC5leGVjKGZpbHRlckFyZ3MpO1xuXG4gICAgaWYgKCFtYXRjaCB8fCBpc05hTihOdW1iZXIobWF0Y2hbMV0pKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmaWx0ZXJBcmdBc051bWJlciA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgdW5pdCA9IG1hdGNoWzNdO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaWx0ZXJBcmdzID09PSAnbnVtYmVyJykge1xuICAgIGZpbHRlckFyZ0FzTnVtYmVyID0gZmlsdGVyQXJncztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc3dpdGNoIChmaWx0ZXJOYW1lKSB7XG4gICAgLy8gSHVlIHJvdGF0ZSB0YWtlcyBzb21lIGFuZ2xlIHRoYXQgY2FuIGhhdmUgYSB1bml0IGFuZCBjYW4gYmVcbiAgICAvLyBuZWdhdGl2ZS4gQWRkaXRpb25hbGx5LCAwIHdpdGggbm8gdW5pdCBpcyBhbGxvd2VkLlxuICAgIGNhc2UgJ2h1ZVJvdGF0ZSc6XG4gICAgICBpZiAoZmlsdGVyQXJnQXNOdW1iZXIgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpZiAodW5pdCAhPT0gJ2RlZycgJiYgdW5pdCAhPT0gJ3JhZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bml0ID09PSAncmFkJ1xuICAgICAgICA/ICgxODAgKiBmaWx0ZXJBcmdBc051bWJlcikgLyBNYXRoLlBJXG4gICAgICAgIDogZmlsdGVyQXJnQXNOdW1iZXI7XG4gICAgLy8gYmx1ciB0YWtlcyBhbnkgcG9zaXRpdmUgQ1NTIGxlbmd0aCB0aGF0IGlzIG5vdCBhIHBlcmNlbnQuIEluIFJOXG4gICAgLy8gd2UgY3VycmVudGx5IG9ubHkgaGF2ZSBESVBzLCBzbyB3ZSBhcmUgbm90IHBhcnNpbmcgdW5pdHMgaGVyZS5cbiAgICBjYXNlICdibHVyJzpcbiAgICAgIGlmICgodW5pdCAmJiB1bml0ICE9PSAncHgnKSB8fCBmaWx0ZXJBcmdBc051bWJlciA8IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWx0ZXJBcmdBc051bWJlcjtcbiAgICAvLyBBbGwgb3RoZXIgZmlsdGVycyBleGNlcHQgdGFrZSBhIG5vbiBuZWdhdGl2ZSBudW1iZXIgb3IgcGVyY2VudGFnZS4gVGhlcmVcbiAgICAvLyBhcmUgbm8gdW5pdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmFsdWUgYW5kIHBlcmNlbnRhZ2UgbnVtYmVycyBtYXAgMS10by0xXG4gICAgLy8gdG8gYSBub24tcGVyY2VudGFnZSBudW1iZXIgKGUuZy4gNTAlID09IDAuNSkuXG4gICAgY2FzZSAnYnJpZ2h0bmVzcyc6XG4gICAgY2FzZSAnY29udHJhc3QnOlxuICAgIGNhc2UgJ2dyYXlzY2FsZSc6XG4gICAgY2FzZSAnaW52ZXJ0JzpcbiAgICBjYXNlICdvcGFjaXR5JzpcbiAgICBjYXNlICdzYXR1cmF0ZSc6XG4gICAgY2FzZSAnc2VwaWEnOlxuICAgICAgaWYgKCh1bml0ICYmIHVuaXQgIT09ICclJyAmJiB1bml0ICE9PSAncHgnKSB8fCBmaWx0ZXJBcmdBc051bWJlciA8IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh1bml0ID09PSAnJScpIHtcbiAgICAgICAgZmlsdGVyQXJnQXNOdW1iZXIgLz0gMTAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZpbHRlckFyZ0FzTnVtYmVyO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlRHJvcFNoYWRvdyhcbiAgcmF3RHJvcFNoYWRvdzogc3RyaW5nIHwgRHJvcFNoYWRvd1ZhbHVlLFxuKTogP1BhcnNlZERyb3BTaGFkb3cge1xuICBjb25zdCBkcm9wU2hhZG93ID1cbiAgICB0eXBlb2YgcmF3RHJvcFNoYWRvdyA9PT0gJ3N0cmluZydcbiAgICAgID8gcGFyc2VEcm9wU2hhZG93U3RyaW5nKHJhd0Ryb3BTaGFkb3cpXG4gICAgICA6IHJhd0Ryb3BTaGFkb3c7XG5cbiAgY29uc3QgcGFyc2VkRHJvcFNoYWRvdzogUGFyc2VkRHJvcFNoYWRvdyA9IHtcbiAgICBvZmZzZXRYOiAwLFxuICAgIG9mZnNldFk6IDAsXG4gIH07XG4gIGxldCBvZmZzZXRYOiBudW1iZXI7XG4gIGxldCBvZmZzZXRZOiBudW1iZXI7XG5cbiAgZm9yIChjb25zdCBhcmcgaW4gZHJvcFNoYWRvdykge1xuICAgIGxldCB2YWx1ZTtcbiAgICBzd2l0Y2ggKGFyZykge1xuICAgICAgY2FzZSAnb2Zmc2V0WCc6XG4gICAgICAgIHZhbHVlID1cbiAgICAgICAgICB0eXBlb2YgZHJvcFNoYWRvdy5vZmZzZXRYID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBwYXJzZUxlbmd0aChkcm9wU2hhZG93Lm9mZnNldFgpXG4gICAgICAgICAgICA6IGRyb3BTaGFkb3cub2Zmc2V0WDtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXRYID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb2Zmc2V0WSc6XG4gICAgICAgIHZhbHVlID1cbiAgICAgICAgICB0eXBlb2YgZHJvcFNoYWRvdy5vZmZzZXRZID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBwYXJzZUxlbmd0aChkcm9wU2hhZG93Lm9mZnNldFkpXG4gICAgICAgICAgICA6IGRyb3BTaGFkb3cub2Zmc2V0WTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXRZID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RhbmRhcmREZXZpYXRpb24nOlxuICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgdHlwZW9mIGRyb3BTaGFkb3cuc3RhbmRhcmREZXZpYXRpb24gPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IHBhcnNlTGVuZ3RoKGRyb3BTaGFkb3cuc3RhbmRhcmREZXZpYXRpb24pXG4gICAgICAgICAgICA6IGRyb3BTaGFkb3cuc3RhbmRhcmREZXZpYXRpb247XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlIDwgMCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlZERyb3BTaGFkb3cuc3RhbmRhcmREZXZpYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjb2xvcic6XG4gICAgICAgIGNvbnN0IGNvbG9yID0gcHJvY2Vzc0NvbG9yKGRyb3BTaGFkb3cuY29sb3IpO1xuICAgICAgICBpZiAoY29sb3IgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlZERyb3BTaGFkb3cuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBpZiAob2Zmc2V0WCA9PSBudWxsIHx8IG9mZnNldFkgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcGFyc2VkRHJvcFNoYWRvdy5vZmZzZXRYID0gb2Zmc2V0WDtcbiAgcGFyc2VkRHJvcFNoYWRvdy5vZmZzZXRZID0gb2Zmc2V0WTtcblxuICByZXR1cm4gcGFyc2VkRHJvcFNoYWRvdztcbn1cblxuZnVuY3Rpb24gcGFyc2VEcm9wU2hhZG93U3RyaW5nKHJhd0Ryb3BTaGFkb3c6IHN0cmluZyk6ID9Ecm9wU2hhZG93VmFsdWUge1xuICBjb25zdCBkcm9wU2hhZG93OiBEcm9wU2hhZG93VmFsdWUgPSB7XG4gICAgb2Zmc2V0WDogMCxcbiAgICBvZmZzZXRZOiAwLFxuICB9O1xuICBsZXQgb2Zmc2V0WDogc3RyaW5nO1xuICBsZXQgb2Zmc2V0WTogc3RyaW5nO1xuICBsZXQgbGVuZ3RoQ291bnQgPSAwO1xuICBsZXQga2V5d29yZERldGVjdGVkQWZ0ZXJMZW5ndGggPSBmYWxzZTtcblxuICAvLyBzcGxpdCBhcmdzIGJ5IGFsbCB3aGl0ZXNwYWNlcyB0aGF0IGFyZSBub3QgaW4gcGFyZW50aGVzaXNcbiAgZm9yIChjb25zdCBhcmcgb2YgcmF3RHJvcFNoYWRvdy5zcGxpdCgvXFxzKyg/IVteKF0qXFwpKS8pKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IoYXJnKTtcbiAgICBpZiAocHJvY2Vzc2VkQ29sb3IgIT0gbnVsbCkge1xuICAgICAgaWYgKGRyb3BTaGFkb3cuY29sb3IgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChvZmZzZXRYICE9IG51bGwpIHtcbiAgICAgICAga2V5d29yZERldGVjdGVkQWZ0ZXJMZW5ndGggPSB0cnVlO1xuICAgICAgfVxuICAgICAgZHJvcFNoYWRvdy5jb2xvciA9IGFyZztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHN3aXRjaCAobGVuZ3RoQ291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgb2Zmc2V0WCA9IGFyZztcbiAgICAgICAgbGVuZ3RoQ291bnQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmIChrZXl3b3JkRGV0ZWN0ZWRBZnRlckxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldFkgPSBhcmc7XG4gICAgICAgIGxlbmd0aENvdW50Kys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBpZiAoa2V5d29yZERldGVjdGVkQWZ0ZXJMZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkcm9wU2hhZG93LnN0YW5kYXJkRGV2aWF0aW9uID0gYXJnO1xuICAgICAgICBsZW5ndGhDb3VudCsrO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBpZiAob2Zmc2V0WCA9PSBudWxsIHx8IG9mZnNldFkgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZHJvcFNoYWRvdy5vZmZzZXRYID0gb2Zmc2V0WDtcbiAgZHJvcFNoYWRvdy5vZmZzZXRZID0gb2Zmc2V0WTtcbiAgcmV0dXJuIGRyb3BTaGFkb3c7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTGVuZ3RoKGxlbmd0aDogc3RyaW5nKTogP251bWJlciB7XG4gIC8vIG1hdGNoZXMgb24gYXJncyB3aXRoIHVuaXRzIGxpa2UgXCIxLjUgNSUgLTgwZGVnXCJcbiAgY29uc3QgYXJnc1dpdGhVbml0c1JlZ2V4ID0gLyhbKy1dP1xcZCooXFwuXFxkKyk/KShbXFx3XFxXXSspPy9nO1xuICBjb25zdCBtYXRjaCA9IGFyZ3NXaXRoVW5pdHNSZWdleC5leGVjKGxlbmd0aCk7XG5cbiAgaWYgKCFtYXRjaCB8fCBOdW1iZXIuaXNOYU4obWF0Y2hbMV0pKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAobWF0Y2hbM10gIT0gbnVsbCAmJiBtYXRjaFszXSAhPT0gJ3B4Jykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIE51bWJlcihtYXRjaFsxXSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQVdBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBQyxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxjQUFBRSxhQUFBO0FBQUEsSUFBQUMsUUFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sZUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBS2IsSUFBQVEsYUFBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQTBDLFNBQUFTLDJCQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSx5QkFBQUMsTUFBQSxJQUFBSCxDQUFBLENBQUFHLE1BQUEsQ0FBQUMsUUFBQSxLQUFBSixDQUFBLHFCQUFBRSxDQUFBLFFBQUFHLEtBQUEsQ0FBQUMsT0FBQSxDQUFBTixDQUFBLE1BQUFFLENBQUEsR0FBQUssMkJBQUEsQ0FBQVAsQ0FBQSxNQUFBQyxDQUFBLElBQUFELENBQUEsdUJBQUFBLENBQUEsQ0FBQVEsTUFBQSxJQUFBTixDQUFBLEtBQUFGLENBQUEsR0FBQUUsQ0FBQSxPQUFBTyxFQUFBLE1BQUFDLENBQUEsWUFBQUEs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RUFBRTtVQUM1QixPQUFPLElBQUk7UUFDYjtRQUNBLElBQUlMLE9BQU8sSUFBSSxJQUFJLEVBQUU7VUFDbkJRLDBCQUEwQixHQUFHLElBQUk7UUFDbkM7UUFDQXJDLFVBQVUsQ0FBQ2tDLEtBQUssR0FBR0gsR0FBRztRQUN0QjtNQUNGO01BRUEsUUFBUUssV0FBVztRQUNqQixLQUFLLENBQUM7VUFDSlAsT0FBTyxHQUFHRSxHQUFHO1VBQ2JLLFdBQVcsRUFBRTtVQUNiO1FBQ0YsS0FBSyxDQUFDO1VBQ0osSUFBSUMsMEJBQTBCLEVBQUU7WUFDOUIsT0FBTyxJQUFJO1VBQ2I7VUFDQVAsT0FBTyxHQUFHQyxHQUFHO1VBQ2JLLFdBQVcsRUFBRTtVQUNiO1FBQ0YsS0FBSyxDQUFDO1VBQ0osSUFBSUMsMEJBQTBCLEVBQUU7WUFDOUIsT0FBTyxJQUFJO1VBQ2I7VUFDQXJDLFVBQVUsQ0FBQ2lDLGlCQUFpQixHQUFHRixHQUFHO1VBQ2xDSyxXQUFXLEVBQUU7VUFDYjtRQUNGO1VBQ0UsT0FBTyxJQUFJO01BQ2Y7SUFDRjtFQUFDLFNBQUF2QixHQUFBO0lBQUF5QixVQUFBLENBQUF6RSxDQUFBLENBQUFnRCxHQUFBO0VBQUE7SUFBQXlCLFVBQUEsQ0FBQTVELENBQUE7RUFBQTtFQUNELElBQUltRCxPQUFPLElBQUksSUFBSSxJQUFJQyxPQUFPLElBQUksSUFBSSxFQUFFO0lBQ3RDLE9BQU8sSUFBSTtFQUNiO0VBRUE5QixVQUFVLENBQUM2QixPQUFPLEdBQUdBLE9BQU87RUFDNUI3QixVQUFVLENBQUM4QixPQUFPLEdBQUdBLE9BQU87RUFDNUIsT0FBTzlCLFVBQVU7QUFDbkI7QUFFQSxTQUFTZ0MsV0FBV0EsQ0FBQzVELE1BQWMsRUFBVztFQUU1QyxJQUFNOEMsa0JBQWtCLEdBQUcsK0JBQStCO0VBQzFELElBQU1FLEtBQUssR0FBR0Ysa0JBQWtCLENBQUNyQixJQUFJLENBQUN6QixNQUFNLENBQUM7RUFFN0MsSUFBSSxDQUFDZ0QsS0FBSyxJQUFJRSxNQUFNLENBQUNELEtBQUssQ0FBQ0QsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDcEMsT0FBTyxJQUFJO0VBQ2I7RUFFQSxJQUFJQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO0lBQ3pDLE9BQU8sSUFBSTtFQUNiO0VBRUEsT0FBT0UsTUFBTSxDQUFDRixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekIiLCJpZ25vcmVMaXN0IjpbXX0=