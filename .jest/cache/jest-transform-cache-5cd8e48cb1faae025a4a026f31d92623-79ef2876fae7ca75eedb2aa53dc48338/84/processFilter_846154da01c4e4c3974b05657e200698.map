{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","processFilter","_typeof2","_slicedToArray2","_processColor","_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","n","done","f","TypeError","o","a","u","call","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","filter","result","replace","regex","matches","exec","filterName","toLowerCase","dropShadow","parseDropShadow","push","camelizedName","amount","_getFilterAmount","filterFunction","_iterator","_step","_Object$entries$","entries","filterValue","resultObject","err","concat","filterArgs","filterArgAsNumber","unit","argsWithUnitsRegex","RegExp","match","isNaN","Number","undefined","Math","PI","rawDropShadow","parseDropShadowString","parsedDropShadow","offsetX","offsetY","arg","parseLength","standardDeviation","color","processColor","lengthCount","keywordDetectedAfterLength","_iterator2","split","_step2","processedColor"],"sources":["processFilter.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format strict-local\n * @flow\n * @oncall react-native\n */\n\n'use strict';\n\nimport type {ColorValue} from './StyleSheet';\nimport type {DropShadowValue, FilterFunction} from './StyleSheetTypes';\n\nimport processColor from './processColor';\n\ntype ParsedFilter =\n  | {brightness: number}\n  | {blur: number}\n  | {contrast: number}\n  | {grayscale: number}\n  | {hueRotate: number}\n  | {invert: number}\n  | {opacity: number}\n  | {saturate: number}\n  | {sepia: number}\n  | {dropShadow: ParsedDropShadow};\n\ntype ParsedDropShadow = {\n  offsetX: number,\n  offsetY: number,\n  standardDeviation?: number,\n  color?: ColorValue,\n};\n\nexport default function processFilter(\n  filter: ?($ReadOnlyArray<FilterFunction> | string),\n): $ReadOnlyArray<ParsedFilter> {\n  let result: Array<ParsedFilter> = [];\n  if (filter == null) {\n    return result;\n  }\n\n  if (typeof filter === 'string') {\n    filter = filter.replace(/\\n/g, ' ');\n\n    // matches on functions with args and nested functions like \"drop-shadow(10 10 10 rgba(0, 0, 0, 1))\"\n    const regex = /([\\w-]+)\\(([^()]*|\\([^()]*\\)|[^()]*\\([^()]*\\)[^()]*)\\)/g;\n    let matches;\n\n    while ((matches = regex.exec(filter))) {\n      let filterName = matches[1].toLowerCase();\n      if (filterName === 'drop-shadow') {\n        const dropShadow = parseDropShadow(matches[2]);\n        if (dropShadow != null) {\n          result.push({dropShadow});\n        } else {\n          return [];\n        }\n      } else {\n        const camelizedName =\n          filterName === 'drop-shadow'\n            ? 'dropShadow'\n            : filterName === 'hue-rotate'\n              ? 'hueRotate'\n              : filterName;\n        const amount = _getFilterAmount(camelizedName, matches[2]);\n\n        if (amount != null) {\n          const filterFunction = {};\n          // $FlowFixMe The key will be the correct one but flow can't see that.\n          filterFunction[camelizedName] = amount;\n          // $FlowFixMe The key will be the correct one but flow can't see that.\n          result.push(filterFunction);\n        } else {\n          // If any primitive is invalid then apply none of the filters. This is how\n          // web works and makes it clear that something is wrong becuase no\n          // graphical effects are happening.\n          return [];\n        }\n      }\n    }\n  } else if (Array.isArray(filter)) {\n    for (const filterFunction of filter) {\n      const [filterName, filterValue] = Object.entries(filterFunction)[0];\n      if (filterName === 'dropShadow') {\n        // $FlowFixMe\n        const dropShadow = parseDropShadow(filterValue);\n        if (dropShadow == null) {\n          return [];\n        }\n        result.push({dropShadow});\n      } else {\n        const amount = _getFilterAmount(filterName, filterValue);\n\n        if (amount != null) {\n          const resultObject = {};\n          // $FlowFixMe\n          resultObject[filterName] = amount;\n          // $FlowFixMe\n          result.push(resultObject);\n        } else {\n          // If any primitive is invalid then apply none of the filters. This is how\n          // web works and makes it clear that something is wrong becuase no\n          // graphical effects are happening.\n          return [];\n        }\n      }\n    }\n  } else {\n    throw new TypeError(`${typeof filter} filter is not a string or array`);\n  }\n\n  return result;\n}\n\nfunction _getFilterAmount(filterName: string, filterArgs: mixed): ?number {\n  let filterArgAsNumber: number;\n  let unit: string;\n  if (typeof filterArgs === 'string') {\n    // matches on args with units like \"1.5 5% -80deg\"\n    const argsWithUnitsRegex = new RegExp(/([+-]?\\d*(\\.\\d+)?)([a-zA-Z%]+)?/g);\n    const match = argsWithUnitsRegex.exec(filterArgs);\n\n    if (!match || isNaN(Number(match[1]))) {\n      return undefined;\n    }\n\n    filterArgAsNumber = Number(match[1]);\n    unit = match[3];\n  } else if (typeof filterArgs === 'number') {\n    filterArgAsNumber = filterArgs;\n  } else {\n    return undefined;\n  }\n\n  switch (filterName) {\n    // Hue rotate takes some angle that can have a unit and can be\n    // negative. Additionally, 0 with no unit is allowed.\n    case 'hueRotate':\n      if (filterArgAsNumber === 0) {\n        return 0;\n      }\n      if (unit !== 'deg' && unit !== 'rad') {\n        return undefined;\n      }\n      return unit === 'rad'\n        ? (180 * filterArgAsNumber) / Math.PI\n        : filterArgAsNumber;\n    // blur takes any positive CSS length that is not a percent. In RN\n    // we currently only have DIPs, so we are not parsing units here.\n    case 'blur':\n      if ((unit && unit !== 'px') || filterArgAsNumber < 0) {\n        return undefined;\n      }\n      return filterArgAsNumber;\n    // All other filters except take a non negative number or percentage. There\n    // are no units associated with this value and percentage numbers map 1-to-1\n    // to a non-percentage number (e.g. 50% == 0.5).\n    case 'brightness':\n    case 'contrast':\n    case 'grayscale':\n    case 'invert':\n    case 'opacity':\n    case 'saturate':\n    case 'sepia':\n      if ((unit && unit !== '%' && unit !== 'px') || filterArgAsNumber < 0) {\n        return undefined;\n      }\n      if (unit === '%') {\n        filterArgAsNumber /= 100;\n      }\n      return filterArgAsNumber;\n    default:\n      return undefined;\n  }\n}\n\nfunction parseDropShadow(\n  rawDropShadow: string | DropShadowValue,\n): ?ParsedDropShadow {\n  const dropShadow =\n    typeof rawDropShadow === 'string'\n      ? parseDropShadowString(rawDropShadow)\n      : rawDropShadow;\n\n  const parsedDropShadow: ParsedDropShadow = {\n    offsetX: 0,\n    offsetY: 0,\n  };\n  let offsetX: number;\n  let offsetY: number;\n\n  for (const arg in dropShadow) {\n    let value;\n    switch (arg) {\n      case 'offsetX':\n        value =\n          typeof dropShadow.offsetX === 'string'\n            ? parseLength(dropShadow.offsetX)\n            : dropShadow.offsetX;\n        if (value == null) {\n          return null;\n        }\n        offsetX = value;\n        break;\n      case 'offsetY':\n        value =\n          typeof dropShadow.offsetY === 'string'\n            ? parseLength(dropShadow.offsetY)\n            : dropShadow.offsetY;\n        if (value == null) {\n          return null;\n        }\n        offsetY = value;\n        break;\n      case 'standardDeviation':\n        value =\n          typeof dropShadow.standardDeviation === 'string'\n            ? parseLength(dropShadow.standardDeviation)\n            : dropShadow.standardDeviation;\n        if (value == null || value < 0) {\n          return null;\n        }\n        parsedDropShadow.standardDeviation = value;\n        break;\n      case 'color':\n        const color = processColor(dropShadow.color);\n        if (color == null) {\n          return null;\n        }\n        parsedDropShadow.color = color;\n        break;\n      default:\n        return null;\n    }\n  }\n\n  if (offsetX == null || offsetY == null) {\n    return null;\n  }\n\n  parsedDropShadow.offsetX = offsetX;\n  parsedDropShadow.offsetY = offsetY;\n\n  return parsedDropShadow;\n}\n\nfunction parseDropShadowString(rawDropShadow: string): ?DropShadowValue {\n  const dropShadow: DropShadowValue = {\n    offsetX: 0,\n    offsetY: 0,\n  };\n  let offsetX: string;\n  let offsetY: string;\n  let lengthCount = 0;\n  let keywordDetectedAfterLength = false;\n\n  // split args by all whitespaces that are not in parenthesis\n  for (const arg of rawDropShadow.split(/\\s+(?![^(]*\\))/)) {\n    const processedColor = processColor(arg);\n    if (processedColor != null) {\n      if (dropShadow.color != null) {\n        return null;\n      }\n      if (offsetX != null) {\n        keywordDetectedAfterLength = true;\n      }\n      dropShadow.color = arg;\n      continue;\n    }\n\n    switch (lengthCount) {\n      case 0:\n        offsetX = arg;\n        lengthCount++;\n        break;\n      case 1:\n        if (keywordDetectedAfterLength) {\n          return null;\n        }\n        offsetY = arg;\n        lengthCount++;\n        break;\n      case 2:\n        if (keywordDetectedAfterLength) {\n          return null;\n        }\n        dropShadow.standardDeviation = arg;\n        lengthCount++;\n        break;\n      default:\n        return null;\n    }\n  }\n  if (offsetX == null || offsetY == null) {\n    return null;\n  }\n\n  dropShadow.offsetX = offsetX;\n  dropShadow.offsetY = offsetY;\n  return dropShadow;\n}\n\nfunction parseLength(length: string): ?number {\n  // matches on args with units like \"1.5 5% -80deg\"\n  const argsWithUnitsRegex = /([+-]?\\d*(\\.\\d+)?)([\\w\\W]+)?/g;\n  const match = argsWithUnitsRegex.exec(length);\n\n  if (!match || Number.isNaN(match[1])) {\n    return null;\n  }\n\n  if (match[3] != null && match[3] !== 'px') {\n    return null;\n  }\n\n  return Number(match[1]);\n}\n"],"mappings":"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","ignoreList":[]}